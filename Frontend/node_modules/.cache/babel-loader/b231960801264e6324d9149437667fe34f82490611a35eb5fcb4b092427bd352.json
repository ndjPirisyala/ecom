{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nadee\\\\OneDrive\\\\Documents\\\\Ecommerce-Microservices-dev\\\\Ecommerce-Microservices-dev\\\\Frontend\\\\src\\\\pages\\\\ProductPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faStar, faStarHalfAlt, faMinus, faPlus, faCheck, faTruck, faShieldAlt, faUndo } from '@fortawesome/free-solid-svg-icons';\nimport { useCart } from '../context/CartContext';\nimport ProductCard from '../components/ProductCard';\nimport { formatPrice } from '../utils/priceUtils';\nimport './ProductPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductPage = () => {\n  _s();\n  const {\n    product_id\n  } = useParams();\n  const [product, setProduct] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [selectedSize, setSelectedSize] = useState('');\n  const [selectedColor, setSelectedColor] = useState('');\n  const [quantity, setQuantity] = useState(1);\n  const [selectedImage, setSelectedImage] = useState(0);\n  const [isZoomed, setIsZoomed] = useState(false);\n  const [zoomPosition, setZoomPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [buttonClicked, setButtonClicked] = useState(false);\n  const [buttonText, setButtonText] = useState('Add to Cart');\n  const [quantityInCart, setQuantityInCart] = useState(0);\n  const [isScrolled, setIsScrolled] = useState(false);\n  const productPageRef = useRef(null);\n  const imageRef = useRef(null);\n\n  // Get cart functions from context\n  const {\n    addToCart,\n    cart\n  } = useCart();\n\n  // Handle scroll for sticky add to cart\n  useEffect(() => {\n    const handleScroll = () => {\n      const scrollPosition = window.scrollY;\n      if (scrollPosition > 300) {\n        setIsScrolled(true);\n      } else {\n        setIsScrolled(false);\n      }\n    };\n    window.addEventListener('scroll', handleScroll);\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, []);\n\n  // Calculate quantity in cart for this product\n  const getProductQuantityInCart = useCallback(() => {\n    if (!cart || !cart.items || !product.product_id) return 0;\n    return cart.items.filter(item => item.id === product.product_id && (selectedSize ? item.size === selectedSize : true) && (selectedColor ? item.color === selectedColor : true)).reduce((total, item) => total + item.quantity, 0);\n  }, [cart, product.product_id, selectedSize, selectedColor]);\n\n  // Update quantity in cart and button text when cart changes\n  useEffect(() => {\n    if (loading) return;\n    const qty = getProductQuantityInCart();\n    setQuantityInCart(qty);\n    if (qty > 0) {\n      setButtonText(`Add to Cart (${qty} in cart)`);\n    } else {\n      setButtonText('Add to Cart');\n    }\n  }, [cart, getProductQuantityInCart, loading]);\n\n  // State for error handling\n  const [error, setError] = useState(null);\n\n  // Fetch product data from backend\n  useEffect(() => {\n    const fetchProduct = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        // Import ProductService dynamically to avoid circular dependencies\n        const ProductService = (await import('../services/ProductService')).default;\n        const productData = await ProductService.getProduct(product_id);\n        if (!productData) {\n          throw new Error('Product not found');\n        }\n\n        // Transform backend product model to match frontend expectations\n        const transformedProduct = {\n          id: productData.product_id,\n          name: productData.name,\n          price: productData.price,\n          description: productData.description,\n          rating: productData.ratings || 0,\n          reviews: productData.review_count || productData.reviews || 0,\n          sizes: productData.sizes || ['S', 'M', 'L', 'XL'],\n          colors: productData.colors || ['Black', 'White', 'Blue', 'Red'],\n          images: productData.images && productData.images.length > 0 ? productData.images : ['https://images.unsplash.com/photo-1523381210434-271e8be1f52b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80', 'https://images.unsplash.com/photo-1516257984-b1b4d707412e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80', 'https://images.unsplash.com/photo-1529139574466-a303027c1d8b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80', 'https://images.unsplash.com/photo-1554568218-0f1715e72254?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80'],\n          category: productData.main_category,\n          stock: productData.stock || 10,\n          brand: productData.brand || 'Fashion Brand',\n          features: productData.features || ['100% premium cotton fabric', 'Regular comfortable fit', 'Machine washable', 'Reinforced stitching at stress points', 'Sustainable manufacturing process'],\n          inStock: productData.stock > 0 || true\n        };\n        setProduct(transformedProduct);\n        setSelectedSize(transformedProduct.sizes[0]);\n        setSelectedColor(transformedProduct.colors[0]);\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching product:', error);\n        setError(error.message || 'Failed to load product details');\n        setLoading(false);\n      }\n    };\n    fetchProduct();\n  }, [id]);\n\n  // Fetch product recommendations\n  const [relatedProducts, setRelatedProducts] = useState([]);\n  const [loadingRecommendations, setLoadingRecommendations] = useState(false);\n  const [recommendationsError, setRecommendationsError] = useState(null);\n  useEffect(() => {\n    const fetchRecommendations = async () => {\n      if (!product.product_id) return;\n      setLoadingRecommendations(true);\n      setRecommendationsError(null);\n      try {\n        // Import ProductService dynamically to avoid circular dependencies\n        const ProductService = (await import('../services/ProductService')).default;\n        const recommendedProductsData = await ProductService.getRecommendations(product.product_id);\n        if (!recommendedProductsData || !Array.isArray(recommendedProductsData) || recommendedProductsData.length === 0) {\n          throw new Error('No recommendations available');\n        }\n\n        // Transform recommended products to match frontend expectations\n        const transformedRecommendations = recommendedProductsData.map(item => ({\n          id: item.product_id || item.id,\n          name: item.name,\n          price: item.price,\n          originalPrice: item.original_price || (item.discount > 0 ? item.price / (1 - item.discount / 100) : item.price * 1.2),\n          rating: item.ratings || item.rating || 4.5,\n          reviews: item.review_count || item.reviews || Math.floor(Math.random() * 100) + 20,\n          category: item.category,\n          image: item.images && item.images.length > 0 ? item.images[0] : 'https://images.unsplash.com/photo-1523381210434-271e8be1f52b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80',\n          sale: item.discount > 0 || item.original_price && item.price < item.original_price\n        }));\n        setRelatedProducts(transformedRecommendations);\n        setLoadingRecommendations(false);\n      } catch (error) {\n        console.error('Error fetching recommendations:', error);\n        setRecommendationsError(error.message || 'Failed to load recommendations');\n\n        // Fallback to default related products if API fails\n        setRelatedProducts([{\n          id: parseInt(product.product_id) + 1,\n          name: \"Slim Fit Denim Jeans\",\n          price: 59.99,\n          originalPrice: 79.99,\n          rating: 4.3,\n          reviews: 56,\n          category: \"men\",\n          image: \"https://images.unsplash.com/photo-1542272604-787c3835535d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80\",\n          sale: true\n        }, {\n          id: parseInt(id) + 2,\n          name: \"Casual Cotton T-Shirt\",\n          price: 29.99,\n          originalPrice: 29.99,\n          rating: 4.5,\n          reviews: 87,\n          category: \"men\",\n          image: \"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80\"\n        }, {\n          id: parseInt(id) + 3,\n          name: \"Lightweight Spring Jacket\",\n          price: 89.99,\n          originalPrice: 119.99,\n          rating: 4.7,\n          reviews: 42,\n          category: \"men\",\n          image: \"https://images.unsplash.com/photo-1591047139829-d91aecb6caea?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80\",\n          sale: true\n        }, {\n          id: parseInt(id) + 4,\n          name: \"Classic Oxford Shoes\",\n          price: 119.99,\n          originalPrice: 119.99,\n          rating: 4.8,\n          reviews: 36,\n          category: \"men\",\n          image: \"https://images.unsplash.com/photo-1549298916-b41d501d3772?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80\"\n        }]);\n        setLoadingRecommendations(false);\n      }\n    };\n    fetchRecommendations();\n  }, [product.product_id, id]);\n  const handleQuantityChange = e => {\n    setQuantity(parseInt(e.target.value));\n  };\n  const handleSizeSelect = size => {\n    setSelectedSize(size);\n  };\n  const handleColorSelect = color => {\n    setSelectedColor(color);\n  };\n  const handleThumbnailClick = index => {\n    setSelectedImage(index);\n    // Reset zoom when changing images\n    setIsZoomed(false);\n  };\n  const handleImageMouseMove = e => {\n    if (!imageRef.current) return;\n    const {\n      left,\n      top,\n      width,\n      height\n    } = imageRef.current.getBoundingClientRect();\n    const x = (e.clientX - left) / width * 100;\n    const y = (e.clientY - top) / height * 100;\n    setZoomPosition({\n      x,\n      y\n    });\n  };\n  const handleImageMouseEnter = () => {\n    setIsZoomed(true);\n  };\n  const handleImageMouseLeave = () => {\n    setIsZoomed(false);\n  };\n  const handleAddToCart = () => {\n    if (!selectedSize) {\n      alert('Please select a size');\n      return;\n    }\n    if (!selectedColor) {\n      alert('Please select a color');\n      return;\n    }\n    try {\n      // Add product to cart using cart context\n      addToCart(product, quantity, selectedSize, selectedColor);\n\n      // Update local cart count for immediate feedback\n      const newQuantity = quantityInCart + quantity;\n\n      // Animation and feedback\n      setButtonClicked(true);\n      setButtonText(`Added! (${newQuantity} in cart)`);\n      setTimeout(() => {\n        setButtonClicked(false);\n        setButtonText(`Add to Cart (${newQuantity} in cart)`);\n      }, 1200);\n    } catch (error) {\n      console.error('Error adding to cart:', error);\n      alert('Failed to add item to cart. Please try again.');\n    }\n  };\n\n  // Related products are now fetched from the backend via the recommendations API\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"Loading product details...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        className: \"back-to-home\",\n        children: \"Back to Home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 7\n    }, this);\n  }\n  if (!product || !product.product_id) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: \"Product not found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        className: \"back-to-home\",\n        children: \"Back to Home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `product-page ${isScrolled ? 'scrolled' : ''}`,\n    ref: productPageRef,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-breadcrumb\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: \"Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this), \" / \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/category/clothing\",\n          children: \"Clothing\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 38\n        }, this), \" / \", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 86\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-gallery\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `main-image-container ${isZoomed ? 'zoomed' : ''}`,\n            onMouseMove: handleImageMouseMove,\n            onMouseEnter: handleImageMouseEnter,\n            onMouseLeave: handleImageMouseLeave,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"main-image\",\n              ref: imageRef,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: product.images[selectedImage],\n                alt: product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 15\n            }, this), isZoomed && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"zoom-image\",\n              style: {\n                backgroundImage: `url(${product.images[selectedImage]})`,\n                backgroundPosition: `${zoomPosition.x}% ${zoomPosition.y}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"zoom-instruction\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Hover to zoom\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 15\n            }, this), quantityInCart > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart-quantity-badge product-page-badge\",\n              children: [quantityInCart, \" in cart\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"thumbnail-images\",\n            children: product.images.map((image, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `thumbnail ${selectedImage === index ? 'active' : ''}`,\n              onClick: () => handleThumbnailClick(index),\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: image,\n                alt: `${product.name} view ${index + 1}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 19\n              }, this)\n            }, `thumbnail-${index}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"product-name\",\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-rating\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stars\",\n              children: [1, 2, 3, 4, 5].map(star => /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: product.rating >= star ? faStar : product.rating + 0.5 >= star ? faStarHalfAlt : ['far', 'star'],\n                className: product.rating >= star ? '' : 'empty'\n              }, star, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"review-count\",\n              children: [product.reviews, \" reviews\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-price\",\n            children: formatPrice(product.price)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"product-description\",\n            children: product.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-benefits\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"benefit-item\",\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faCheck\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"In stock and ready to ship\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"benefit-item\",\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faTruck\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Free shipping on orders over \\xA350\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"benefit-item\",\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faShieldAlt\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"2-year warranty\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"benefit-item\",\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faUndo\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"30-day returns\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-options\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"size-selection\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"option-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \"Select Size\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 436,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/size-guide\",\n                  className: \"size-guide\",\n                  children: \"Size Guide\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 437,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"size-options\",\n                children: product.sizes.map(size => /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `size-option ${selectedSize === size ? 'selected' : ''}`,\n                  onClick: () => handleSizeSelect(size),\n                  children: size\n                }, size, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 441,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 439,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"color-selection\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Select Color\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"color-options\",\n                children: product.colors.map(color => /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `color-option ${selectedColor === color ? 'selected' : ''}`,\n                  style: {\n                    backgroundColor: color.toLowerCase()\n                  },\n                  onClick: () => handleColorSelect(color),\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"sr-only\",\n                    children: color\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 462,\n                    columnNumber: 23\n                  }, this), selectedColor === color && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"color-checkmark\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 463,\n                    columnNumber: 51\n                  }, this)]\n                }, color, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 456,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"selected-color\",\n                children: selectedColor\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"quantity-selection\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"quantity-selector\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"quantity-btn\",\n                  onClick: () => setQuantity(Math.max(1, quantity - 1)),\n                  \"aria-label\": \"Decrease quantity\",\n                  children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                    icon: faMinus\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 480,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 475,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  min: \"1\",\n                  max: \"99\",\n                  className: \"quantity-input\",\n                  value: quantity,\n                  onChange: handleQuantityChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 482,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"quantity-btn\",\n                  onClick: () => setQuantity(quantity + 1),\n                  \"aria-label\": \"Increase quantity\",\n                  children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                    icon: faPlus\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 495,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 490,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `add-to-cart-btn ${buttonClicked ? 'clicked' : ''}`,\n            onClick: handleAddToCart,\n            disabled: !product.inStock,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"button-text\",\n              children: product.inStock ? buttonText : 'Out of Stock'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-details-tabs\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tab-content\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-features\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Product Features\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              children: product.features && product.features.map((feature, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faCheck,\n                  className: \"feature-icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 517,\n                  columnNumber: 35\n                }, this), \" \", feature]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sticky-add-to-cart\",\n        style: {\n          transform: isScrolled ? 'translateY(0)' : 'translateY(100%)',\n          zIndex: 999\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sticky-product-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: product.images[0],\n            alt: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sticky-product-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"sticky-product-price\",\n              children: formatPrice(product.price)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `sticky-cart-btn ${buttonClicked ? 'clicked' : ''}`,\n          onClick: handleAddToCart,\n          disabled: !product.inStock,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"button-text\",\n            children: product.inStock ? 'Add to Cart' : 'Out of Stock'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 540,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"related-products-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"You May Also Like\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"related-products\",\n          children: loadingRecommendations ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-recommendations\",\n            children: \"Loading recommendations...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 15\n          }, this) : recommendationsError ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"recommendations-error\",\n            children: recommendationsError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 550,\n            columnNumber: 15\n          }, this) : relatedProducts && relatedProducts.length > 0 ? relatedProducts.map(product => /*#__PURE__*/_jsxDEV(ProductCard, {\n            product: product\n          }, product.product_id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 17\n          }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-recommendations\",\n            children: \"No recommendations available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 556,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 335,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductPage, \"g/n7J4gai8pBjJRpM7xGab/+ctM=\", false, function () {\n  return [useParams, useCart];\n});\n_c = ProductPage;\nexport default ProductPage;\nvar _c;\n$RefreshReg$(_c, \"ProductPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useParams","Link","FontAwesomeIcon","faStar","faStarHalfAlt","faMinus","faPlus","faCheck","faTruck","faShieldAlt","faUndo","useCart","ProductCard","formatPrice","jsxDEV","_jsxDEV","ProductPage","_s","product_id","product","setProduct","loading","setLoading","selectedSize","setSelectedSize","selectedColor","setSelectedColor","quantity","setQuantity","selectedImage","setSelectedImage","isZoomed","setIsZoomed","zoomPosition","setZoomPosition","x","y","buttonClicked","setButtonClicked","buttonText","setButtonText","quantityInCart","setQuantityInCart","isScrolled","setIsScrolled","productPageRef","imageRef","addToCart","cart","handleScroll","scrollPosition","window","scrollY","addEventListener","removeEventListener","getProductQuantityInCart","items","filter","item","id","size","color","reduce","total","qty","error","setError","fetchProduct","ProductService","default","productData","getProduct","Error","transformedProduct","name","price","description","rating","ratings","reviews","review_count","sizes","colors","images","length","category","main_category","stock","brand","features","inStock","console","message","relatedProducts","setRelatedProducts","loadingRecommendations","setLoadingRecommendations","recommendationsError","setRecommendationsError","fetchRecommendations","recommendedProductsData","getRecommendations","Array","isArray","transformedRecommendations","map","originalPrice","original_price","discount","Math","floor","random","image","sale","parseInt","handleQuantityChange","e","target","value","handleSizeSelect","handleColorSelect","handleThumbnailClick","index","handleImageMouseMove","current","left","top","width","height","getBoundingClientRect","clientX","clientY","handleImageMouseEnter","handleImageMouseLeave","handleAddToCart","alert","newQuantity","setTimeout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","ref","onMouseMove","onMouseEnter","onMouseLeave","src","alt","style","backgroundImage","backgroundPosition","onClick","star","icon","backgroundColor","toLowerCase","max","type","min","onChange","disabled","feature","transform","zIndex","_c","$RefreshReg$"],"sources":["C:/Users/nadee/OneDrive/Documents/Ecommerce-Microservices-dev/Ecommerce-Microservices-dev/Frontend/src/pages/ProductPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { \n  faStar, \n  faStarHalfAlt, \n  faMinus, \n  faPlus, \n  faCheck, \n  faTruck, \n  faShieldAlt, \n  faUndo\n} from '@fortawesome/free-solid-svg-icons';\nimport { useCart } from '../context/CartContext';\nimport ProductCard from '../components/ProductCard';\nimport { formatPrice } from '../utils/priceUtils';\nimport './ProductPage.css';\n\nconst ProductPage = () => {\n  const { product_id } = useParams();\n  const [product, setProduct] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [selectedSize, setSelectedSize] = useState('');\n  const [selectedColor, setSelectedColor] = useState('');\n  const [quantity, setQuantity] = useState(1);\n  const [selectedImage, setSelectedImage] = useState(0);\n  const [isZoomed, setIsZoomed] = useState(false);\n  const [zoomPosition, setZoomPosition] = useState({ x: 0, y: 0 });\n  const [buttonClicked, setButtonClicked] = useState(false);\n  const [buttonText, setButtonText] = useState('Add to Cart');\n  const [quantityInCart, setQuantityInCart] = useState(0);\n  const [isScrolled, setIsScrolled] = useState(false);\n  const productPageRef = useRef(null);\n  const imageRef = useRef(null);\n  \n  // Get cart functions from context\n  const { addToCart, cart } = useCart();\n\n  // Handle scroll for sticky add to cart\n  useEffect(() => {\n    const handleScroll = () => {\n      const scrollPosition = window.scrollY;\n      if (scrollPosition > 300) {\n        setIsScrolled(true);\n      } else {\n        setIsScrolled(false);\n      }\n    };\n\n    window.addEventListener('scroll', handleScroll);\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, []);\n\n  // Calculate quantity in cart for this product\n  const getProductQuantityInCart = useCallback(() => {\n    if (!cart || !cart.items || !product.product_id) return 0;\n    \n    return cart.items\n      .filter(item => \n        item.id === product.product_id && \n        (selectedSize ? item.size === selectedSize : true) && \n        (selectedColor ? item.color === selectedColor : true)\n      )\n      .reduce((total, item) => total + item.quantity, 0);\n  }, [cart, product.product_id, selectedSize, selectedColor]);\n\n  // Update quantity in cart and button text when cart changes\n  useEffect(() => {\n    if (loading) return;\n    \n    const qty = getProductQuantityInCart();\n    setQuantityInCart(qty);\n    \n    if (qty > 0) {\n      setButtonText(`Add to Cart (${qty} in cart)`);\n    } else {\n      setButtonText('Add to Cart');\n    }\n  }, [cart, getProductQuantityInCart, loading]);\n\n  // State for error handling\n  const [error, setError] = useState(null);\n\n  // Fetch product data from backend\n  useEffect(() => {\n    const fetchProduct = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        // Import ProductService dynamically to avoid circular dependencies\n        const ProductService = (await import('../services/ProductService')).default;\n        const productData = await ProductService.getProduct(product_id);\n        \n        if (!productData) {\n          throw new Error('Product not found');\n        }\n        \n        // Transform backend product model to match frontend expectations\n        const transformedProduct = {\n          id: productData.product_id,\n          name: productData.name,\n          price: productData.price,\n          description: productData.description,\n          rating: productData.ratings || 0,\n          reviews: productData.review_count || productData.reviews || 0,\n          sizes: productData.sizes || ['S', 'M', 'L', 'XL'],\n          colors: productData.colors || ['Black', 'White', 'Blue', 'Red'],\n          images: productData.images && productData.images.length > 0 \n            ? productData.images \n            : [\n                'https://images.unsplash.com/photo-1523381210434-271e8be1f52b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80',\n                'https://images.unsplash.com/photo-1516257984-b1b4d707412e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80',\n                'https://images.unsplash.com/photo-1529139574466-a303027c1d8b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80',\n                'https://images.unsplash.com/photo-1554568218-0f1715e72254?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80'\n              ],\n          category: productData.main_category,\n          stock: productData.stock || 10,\n          brand: productData.brand || 'Fashion Brand',\n          features: productData.features || [\n            '100% premium cotton fabric',\n            'Regular comfortable fit',\n            'Machine washable',\n            'Reinforced stitching at stress points',\n            'Sustainable manufacturing process',\n          ],\n          inStock: productData.stock > 0 || true\n        };\n        \n        setProduct(transformedProduct);\n        setSelectedSize(transformedProduct.sizes[0]);\n        setSelectedColor(transformedProduct.colors[0]);\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching product:', error);\n        setError(error.message || 'Failed to load product details');\n        setLoading(false);\n      }\n    };\n    \n    fetchProduct();\n  }, [id]);\n  \n  // Fetch product recommendations\n  const [relatedProducts, setRelatedProducts] = useState([]);\n  const [loadingRecommendations, setLoadingRecommendations] = useState(false);\n  const [recommendationsError, setRecommendationsError] = useState(null);\n  \n  useEffect(() => {\n    const fetchRecommendations = async () => {\n      if (!product.product_id) return;\n      \n      setLoadingRecommendations(true);\n      setRecommendationsError(null);\n      \n      try {\n        // Import ProductService dynamically to avoid circular dependencies\n        const ProductService = (await import('../services/ProductService')).default;\n        const recommendedProductsData = await ProductService.getRecommendations(product.product_id);\n        \n        if (!recommendedProductsData || !Array.isArray(recommendedProductsData) || recommendedProductsData.length === 0) {\n          throw new Error('No recommendations available');\n        }\n        \n        // Transform recommended products to match frontend expectations\n        const transformedRecommendations = recommendedProductsData.map(item => ({\n          id: item.product_id || item.id,\n          name: item.name,\n          price: item.price,\n          originalPrice: item.original_price || (item.discount > 0 ? item.price / (1 - item.discount / 100) : item.price * 1.2),\n          rating: item.ratings || item.rating || 4.5,\n          reviews: item.review_count || item.reviews || Math.floor(Math.random() * 100) + 20,\n          category: item.category,\n          image: item.images && item.images.length > 0 ? item.images[0] : \n                 'https://images.unsplash.com/photo-1523381210434-271e8be1f52b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80',\n          sale: item.discount > 0 || (item.original_price && item.price < item.original_price)\n        }));\n        \n        setRelatedProducts(transformedRecommendations);\n        setLoadingRecommendations(false);\n      } catch (error) {\n        console.error('Error fetching recommendations:', error);\n        setRecommendationsError(error.message || 'Failed to load recommendations');\n        \n        // Fallback to default related products if API fails\n        setRelatedProducts([\n          {\n            id: parseInt(product.product_id) + 1,\n            name: \"Slim Fit Denim Jeans\",\n            price: 59.99,\n            originalPrice: 79.99,\n            rating: 4.3,\n            reviews: 56,\n            category: \"men\",\n            image: \"https://images.unsplash.com/photo-1542272604-787c3835535d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80\",\n            sale: true\n          },\n          {\n            id: parseInt(id) + 2,\n            name: \"Casual Cotton T-Shirt\",\n            price: 29.99,\n            originalPrice: 29.99,\n            rating: 4.5,\n            reviews: 87,\n            category: \"men\",\n            image: \"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80\"\n          },\n          {\n            id: parseInt(id) + 3,\n            name: \"Lightweight Spring Jacket\",\n            price: 89.99,\n            originalPrice: 119.99,\n            rating: 4.7,\n            reviews: 42,\n            category: \"men\",\n            image: \"https://images.unsplash.com/photo-1591047139829-d91aecb6caea?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80\",\n            sale: true\n          },\n          {\n            id: parseInt(id) + 4,\n            name: \"Classic Oxford Shoes\",\n            price: 119.99,\n            originalPrice: 119.99,\n            rating: 4.8,\n            reviews: 36,\n            category: \"men\",\n            image: \"https://images.unsplash.com/photo-1549298916-b41d501d3772?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80\"\n          }\n        ]);\n        setLoadingRecommendations(false);\n      }\n    };\n    \n    fetchRecommendations();\n  }, [product.product_id, id]);\n\n  const handleQuantityChange = (e) => {\n    setQuantity(parseInt(e.target.value));\n  };\n\n  const handleSizeSelect = (size) => {\n    setSelectedSize(size);\n  };\n\n  const handleColorSelect = (color) => {\n    setSelectedColor(color);\n  };\n\n  const handleThumbnailClick = (index) => {\n    setSelectedImage(index);\n    // Reset zoom when changing images\n    setIsZoomed(false);\n  };\n\n  const handleImageMouseMove = (e) => {\n    if (!imageRef.current) return;\n    \n    const { left, top, width, height } = imageRef.current.getBoundingClientRect();\n    const x = ((e.clientX - left) / width) * 100;\n    const y = ((e.clientY - top) / height) * 100;\n    \n    setZoomPosition({ x, y });\n  };\n\n  const handleImageMouseEnter = () => {\n    setIsZoomed(true);\n  };\n\n  const handleImageMouseLeave = () => {\n    setIsZoomed(false);\n  };\n\n  const handleAddToCart = () => {\n    if (!selectedSize) {\n      alert('Please select a size');\n      return;\n    }\n    \n    if (!selectedColor) {\n      alert('Please select a color');\n      return;\n    }\n    \n    try {\n      // Add product to cart using cart context\n      addToCart(product, quantity, selectedSize, selectedColor);\n      \n      // Update local cart count for immediate feedback\n      const newQuantity = quantityInCart + quantity;\n      \n      // Animation and feedback\n      setButtonClicked(true);\n      setButtonText(`Added! (${newQuantity} in cart)`);\n      \n      setTimeout(() => {\n        setButtonClicked(false);\n        setButtonText(`Add to Cart (${newQuantity} in cart)`);\n      }, 1200);\n    } catch (error) {\n      console.error('Error adding to cart:', error);\n      alert('Failed to add item to cart. Please try again.');\n    }\n  };\n\n  // Related products are now fetched from the backend via the recommendations API\n\n  if (loading) {\n    return (\n      <div className=\"container\">\n        <div className=\"loading\">Loading product details...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"container\">\n        <div className=\"error\">{error}</div>\n        <Link to=\"/\" className=\"back-to-home\">Back to Home</Link>\n      </div>\n    );\n  }\n\n  if (!product || !product.product_id) {\n    return (\n      <div className=\"container\">\n        <div className=\"error\">Product not found</div>\n        <Link to=\"/\" className=\"back-to-home\">Back to Home</Link>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`product-page ${isScrolled ? 'scrolled' : ''}`} ref={productPageRef}>\n      <div className=\"container\">\n        <div className=\"product-breadcrumb\">\n          <Link to=\"/\">Home</Link> / <Link to=\"/category/clothing\">Clothing</Link> / <span>{product.name}</span>\n        </div>\n        \n        <div className=\"product-details\">\n          <div className=\"product-gallery\">\n            <div \n              className={`main-image-container ${isZoomed ? 'zoomed' : ''}`}\n              onMouseMove={handleImageMouseMove}\n              onMouseEnter={handleImageMouseEnter}\n              onMouseLeave={handleImageMouseLeave}\n            >\n              <div className=\"main-image\" ref={imageRef}>\n                <img \n                  src={product.images[selectedImage]} \n                  alt={product.name} \n                />\n              </div>\n              {isZoomed && (\n                <div \n                  className=\"zoom-image\"\n                  style={{\n                    backgroundImage: `url(${product.images[selectedImage]})`,\n                    backgroundPosition: `${zoomPosition.x}% ${zoomPosition.y}%`\n                  }}\n                ></div>\n              )}\n              <div className=\"zoom-instruction\">\n                <span>Hover to zoom</span>\n              </div>\n              \n              {quantityInCart > 0 && (\n                <div className=\"cart-quantity-badge product-page-badge\">\n                  {quantityInCart} in cart\n                </div>\n              )}\n            </div>\n            \n            <div className=\"thumbnail-images\">\n              {product.images.map((image, index) => (\n                <div \n                  key={`thumbnail-${index}`}\n                  className={`thumbnail ${selectedImage === index ? 'active' : ''}`}\n                  onClick={() => handleThumbnailClick(index)}\n                >\n                  <img src={image} alt={`${product.name} view ${index + 1}`} />\n                </div>\n              ))}\n            </div>\n          </div>\n          \n          <div className=\"product-info\">\n            <h1 className=\"product-name\">{product.name}</h1>\n            \n            <div className=\"product-rating\">\n              <div className=\"stars\">\n                {[1, 2, 3, 4, 5].map((star) => (\n                  <FontAwesomeIcon \n                    key={star} \n                    icon={\n                      product.rating >= star\n                        ? faStar\n                        : product.rating + 0.5 >= star\n                        ? faStarHalfAlt\n                        : ['far', 'star']\n                    }\n                    className={product.rating >= star ? '' : 'empty'}\n                  />\n                ))}\n              </div>\n              <span className=\"review-count\">{product.reviews} reviews</span>\n            </div>\n            \n            <div className=\"product-price\">{formatPrice(product.price)}</div>\n            \n            <p className=\"product-description\">{product.description}</p>\n\n            <div className=\"product-benefits\">\n              <div className=\"benefit-item\">\n                <FontAwesomeIcon icon={faCheck} />\n                <span>In stock and ready to ship</span>\n              </div>\n              <div className=\"benefit-item\">\n                <FontAwesomeIcon icon={faTruck} />\n                <span>Free shipping on orders over £50</span>\n              </div>\n              <div className=\"benefit-item\">\n                <FontAwesomeIcon icon={faShieldAlt} />\n                <span>2-year warranty</span>\n              </div>\n              <div className=\"benefit-item\">\n                <FontAwesomeIcon icon={faUndo} />\n                <span>30-day returns</span>\n              </div>\n            </div>\n            \n            <div className=\"product-options\">\n              <div className=\"size-selection\">\n                <div className=\"option-header\">\n                  <h3>Select Size</h3>\n                  <Link to=\"/size-guide\" className=\"size-guide\">Size Guide</Link>\n                </div>\n                <div className=\"size-options\">\n                  {product.sizes.map(size => (\n                    <button\n                      key={size}\n                      className={`size-option ${selectedSize === size ? 'selected' : ''}`}\n                      onClick={() => handleSizeSelect(size)}\n                    >\n                      {size}\n                    </button>\n                  ))}\n                </div>\n              </div>\n              \n              <div className=\"color-selection\">\n                <h3>Select Color</h3>\n                <div className=\"color-options\">\n                  {product.colors.map(color => (\n                    <button\n                      key={color}\n                      className={`color-option ${selectedColor === color ? 'selected' : ''}`}\n                      style={{ backgroundColor: color.toLowerCase() }}\n                      onClick={() => handleColorSelect(color)}\n                    >\n                      <span className=\"sr-only\">{color}</span>\n                      {selectedColor === color && <div className=\"color-checkmark\"></div>}\n                    </button>\n                  ))}\n                </div>\n                <div className=\"selected-color\">\n                  {selectedColor}\n                </div>\n              </div>\n              \n              <div className=\"quantity-selection\">\n                <h3>Quantity</h3>\n                <div className=\"quantity-selector\">\n                  <button \n                    className=\"quantity-btn\"\n                    onClick={() => setQuantity(Math.max(1, quantity - 1))}\n                    aria-label=\"Decrease quantity\"\n                  >\n                    <FontAwesomeIcon icon={faMinus} />\n                  </button>\n                  <input \n                    type=\"number\" \n                    min=\"1\" \n                    max=\"99\"\n                    className=\"quantity-input\"\n                    value={quantity}\n                    onChange={handleQuantityChange}\n                  />\n                  <button \n                    className=\"quantity-btn\"\n                    onClick={() => setQuantity(quantity + 1)}\n                    aria-label=\"Increase quantity\"\n                  >\n                    <FontAwesomeIcon icon={faPlus} />\n                  </button>\n                </div>\n              </div>\n            </div>\n            \n            <button\n              className={`add-to-cart-btn ${buttonClicked ? 'clicked' : ''}`}\n              onClick={handleAddToCart}\n              disabled={!product.inStock}\n            >\n              <span className=\"button-text\">{product.inStock ? buttonText : 'Out of Stock'}</span>\n            </button>\n          </div>\n        </div>\n        \n        <div className=\"product-details-tabs\">\n          <div className=\"tab-content\">\n            <div className=\"product-features\">\n              <h3>Product Features</h3>\n              <ul>\n                {product.features && product.features.map((feature, index) => (\n                  <li key={index}><FontAwesomeIcon icon={faCheck} className=\"feature-icon\" /> {feature}</li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"sticky-add-to-cart\" style={{ \n          transform: isScrolled ? 'translateY(0)' : 'translateY(100%)',\n          zIndex: 999 \n        }}>\n          <div className=\"sticky-product-info\">\n            <img src={product.images[0]} alt={product.name} />\n            <div className=\"sticky-product-details\">\n              <h3>{product.name}</h3>\n              <div className=\"sticky-product-price\">{formatPrice(product.price)}</div>\n            </div>\n          </div>\n          <button\n            className={`sticky-cart-btn ${buttonClicked ? 'clicked' : ''}`}\n            onClick={handleAddToCart}\n            disabled={!product.inStock}\n          >\n            <span className=\"button-text\">{product.inStock ? 'Add to Cart' : 'Out of Stock'}</span>\n          </button>\n        </div>\n        \n        <div className=\"related-products-section\">\n          <h2>You May Also Like</h2>\n          <div className=\"related-products\">\n            {loadingRecommendations ? (\n              <div className=\"loading-recommendations\">Loading recommendations...</div>\n            ) : recommendationsError ? (\n              <div className=\"recommendations-error\">{recommendationsError}</div>\n            ) : relatedProducts && relatedProducts.length > 0 ? (\n              relatedProducts.map(product => (\n                <ProductCard key={product.product_id} product={product} />\n              ))\n            ) : (\n              <div className=\"no-recommendations\">No recommendations available</div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}